{
  "version": 2,
  "builds": [
    { "src": "**/*", "use": "@vercel/static" }
  ],
  "routes": [
    /* =========================
       PUMP.FUN API PROXY (fees)
       ========================= */
    { "src": "^/api/pump/balance/tokens/(.*)$", "dest": "https://profile-api.pump.fun/balance/tokens/$1" },

    /* =========================
       DRIFT (Next.js) PROXY
       IMPORTANT: Drift loads chunks from /_next/... (root path)
       ========================= */
    { "src": "^/_next/(.*)$", "dest": "https://ftx2-perps.vercel.app/_next/$1" },

    /* Drift app served under /_perps/... for iframe widget */
    { "src": "^/_perps/(.*)$", "dest": "https://ftx2-perps.vercel.app/$1" },

    /* =========================
       CLEAN URLS (STATIC HTML)
       ========================= */
    { "src": "^/buy/?$", "dest": "/buy.html" },
    { "src": "^/fees/?$", "dest": "/fees.html" },
    { "src": "^/perps/?$", "dest": "/perps.html" },

    { "src": "^/buy\\.html$", "status": 308, "headers": { "Location": "/buy" } },
    { "src": "^/fees\\.html$", "status": 308, "headers": { "Location": "/fees" } },
    { "src": "^/perps\\.html$", "status": 308, "headers": { "Location": "/perps" } },

    { "src": "^/$", "dest": "/index.html" },

    { "handle": "filesystem" },
    { "src": ".*", "dest": "/index.html" }
  ]
}

